{% extends "base.html" %}

{% block content %}
<div class="space-y-6">
    <!-- Status Strip: polls every 30s -->
    <div hx-get="/partials/status" hx-trigger="load, every 30s" hx-swap="innerHTML">
        <p class="text-gray-600 text-sm">Loading status...</p>
    </div>

    <!-- Live job progress: polls every 5s for near-real-time visibility -->
    <div hx-get="/partials/jobs" hx-trigger="load, every 5s" hx-swap="innerHTML">
        <p class="text-gray-600 text-sm">Loading jobs...</p>
    </div>

    <!-- Async funnel: last run stats (wallets / markets / trades_raw processed) -->
    <div hx-get="/partials/async_funnel" hx-trigger="load, every 30s" hx-swap="innerHTML">
        <p class="text-gray-600 text-sm">Loading last run...</p>
    </div>

    <!-- Unified Funnel Bar: Markets → All wallets → Suitable personas → Actively paper traded → Worth following -->
    <div hx-get="/partials/unified_funnel" hx-trigger="load, every 30s" hx-swap="innerHTML">
        <p class="text-gray-600 text-sm">Loading funnel...</p>
    </div>

    <!-- Stage: Events -->
    <details open>
        <summary class="cursor-pointer text-lg font-semibold text-gray-200 mb-2">
            Events
        </summary>
        <div hx-get="/partials/events" hx-trigger="load, every 60s" hx-swap="innerHTML">
            <p class="text-gray-600 text-sm">Loading events...</p>
        </div>
    </details>

    <!-- Stage: All wallets -->
    <details open>
        <summary class="cursor-pointer text-lg font-semibold text-gray-200 mb-2">
            All wallets
        </summary>
        <div hx-get="/partials/wallets" hx-trigger="load, every 60s" hx-swap="innerHTML">
            <p class="text-gray-600 text-sm">Loading wallets...</p>
        </div>
    </details>

    <!-- Stage: Suitable personas wallets -->
    <details open>
        <summary class="cursor-pointer text-lg font-semibold text-gray-200 mb-2">
            Suitable personas wallets
        </summary>
        <div hx-get="/partials/suitable_personas" hx-trigger="load, every 60s" hx-swap="innerHTML">
            <p class="text-gray-600 text-sm">Loading suitable personas...</p>
        </div>
    </details>

    <!-- Stage: Actively paper traded -->
    <details open>
        <summary class="cursor-pointer text-lg font-semibold text-gray-200 mb-2">
            Actively paper traded
        </summary>
        <div hx-get="/partials/paper_traded_wallets" hx-trigger="load, every 30s" hx-swap="innerHTML">
            <p class="text-gray-600 text-sm">Loading paper traded wallets...</p>
        </div>
    </details>

    <!-- Stage: Worth following -->
    <details open>
        <summary class="cursor-pointer text-lg font-semibold text-gray-200 mb-2">
            Worth following
        </summary>
        <div hx-get="/partials/rankings" hx-trigger="load, every 60s" hx-swap="innerHTML">
            <p class="text-gray-600 text-sm">Loading rankings...</p>
        </div>
    </details>
</div>
{% endblock %}
